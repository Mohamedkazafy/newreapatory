<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;600&display=swap">

  <title>Frontend Mentor | Todo app</title>

  <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
  <style>
    .attribution {
      font-size: 11px;
      text-align: center;
    }

    .attribution a {
      color: hsl(228, 45%, 44%);
    }
    *{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Josefin Sans', sans-serif;
}

img{
    max-width: 100%;
}
.flex-row{
    display: flex;
    flex-flow: row nowrap;
    align-items: center;
}
.theme-dark{
    --bgs-top:0 0  url(./images/bg-desktop-dark.jpg) no-repeat;
    --main-bg : hsl(235, 21%, 11%);
    --main-todo: hsl(235, 24%, 19%);
    --todo-shadow: hsl(235, 21%, 11%);
    --font-color: hsl(234, 39%, 85%);
    --font-color-hover:#fff;
}

body.theme-light{
    --bg-top:0 0 url(./images/bg-desktop-light.jpg) no-repeat;
    --main-bg:  hsl(0, 0%, 98%);
    --main-todo:  hsl(0, 0%, 98%);
    --todo-shadow: hsl(235, 21%, 11%);
    --font-color: hsl(236, 9%, 61%);
    --font-color-hover: hsl(235, 21%, 11%);
}

body{
    font: 400 18px/1;
    background: var(--bgs-top);
    background-color: var(--main-bg);
    background-size: contain;
    color: var(--font-color);
}
header,
main{
    max-width: 545px;
    margin: 0 auto;
}
header{
    justify-content: space-between;
    padding: 52px 0 11px;
}

h1{
    font-weight: 700;
    font-size: 2.5rem;
    color: #fff;
    letter-spacing: 1rem;
}
.theme-black{
    margin: 10px 0 0;
}
.theme-black #theme{
    display: none;
}

.theme-black #theme + label::before{
    content: "";
    background: url(./images/icon-sun.svg);
    display: block;
    width: 26px;
    height: 26px;
    cursor: pointer;
}

.theme-black #theme:checked + label::before{
    background: url(./images/icon-moon.svg);
}

.add-new-item{
    background: var(--main-todo);
    height: 65px;
    border-radius: 5px;
    margin: 0 0 24px;
    padding: 26px;
}

.add-new-item #addItem{
    background: transparent;
    color: var(--font-color);
    border: 0;
    outline: 0;
    width: 100%;
    height: 50px;
    font-weight: 400;
    font-size: 18px;
    margin: 4px 0 0 47px;
    letter-spacing: -0.3px;
}

.add-new-item span{
    width: 30px;
    height: 30px;
    border: 1px solid var(--font-color);
    display: block;
    border-radius: 50%;
    /* position: absolute;
    left: 26px;
    top: 21px; */
    cursor: pointer;
}

.add-new-item span:hover{
    background: center url(./images/icon-check.svg) no-repeat,
    linear-gradient(135deg,hsl(192,100%,67%),hsl(280,87%,65%));
}

.content{
    background: var(--main-bg);
    border-radius:5px;
    box-shadow: 0 42px 30px -9px var(--todo-shadow);
}

ul{
    list-style: none;
    padding: 0;
    margin: 0;
}

ul li{
    padding: 0 10px 0 25px;
    min-height: 65px;
    border-bottom: 1px solid var(--font-color);
    position: relative;
}

ul li input[type = "checkbox"]{
    position: absolute;
    opacity: 0;
    cursor: pointer;
    width: 0;
    height: 0;
}


ul li label{
    position: relative;
    cursor: pointer;
    padding: 2px 0 0 48px;
    font-size: 1.1rem;
}

.checkmark{
    position: absolute;
    top: -5px;
    left: 0;
    height: 25px;
    width: 25px;
}

ul li.hidden{
    display: none;
}

ul li input[type = "checkbox"] ~ .checkmark{
    border: 1px solid var(--font-color);
    border-radius: 50%;
}
ul li input[type = "checkbox"] ~ .checkmark:hover{
    border: 0;
    padding: 1px;
    background: linear-gradient(135deg ,hsl(192,100%,67%),hsl(280,87%,65%));
}
ul li input[type = "checkbox"] ~ .checkmark:hover::before{
    content: "";
    width: 23px;
    height: 23px;
    background: var(--todo-bg);
    display: block;
}

ul li input[type = "checkbox"]:checked ~ .checkmark{
    background: center url(./images/icon-check.svg)  no-repeat,
    linear-gradient(135deg ,hsl(192,100%,67%),hsl(280,87%,65%));
}

ul li input[type = "checkbox"]:checked ~ .text{
    text-decoration: line-through;
}

.remove{
    background: url(./images/icon-cross.svg)no-repeat;
    width: 18px;
    height: 18px;
    display: none;
    cursor: pointer;
    position: absolute;
    right: 25px;
    top: 25px;
}
ul li:hover .remove{
    display: block;
}

.item-left{
    margin-right:86px ;
}

.bottom-items{
    padding: 20px 20px 20px 27px;
    font-size: 0.8rem;
    letter-spacing: 0.5px;
    align-items: baseline;
    border-radius: 5px;
    background-color: var(--main-todo);
}
.filter{
    margin-right:47px;
}

.filter input[type = "radio"]{
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
}

.filter label{
    cursor: pointer;
    padding: 0 10px;
}

.filter label:hover{
    color: var(--font-color-hover);
}

.filter input[type = "radio"] :checked ~span{
    color: hsl(221, 62%, 52%);
}

.clear{
    color: var(--font-color);
    cursor: pointer;
}

.clear:hover{
    color: var(--font-color-hover);
}
  </style>
</head>

<body id="body" class="theme-dark">
  <header class="flex-row">
    <h1>TODO</h1>
    <div class="theme-black">
      <input type="checkbox" name="theme" id="theme">
      <label for="theme"></label>
    </div>
  </header>

  <main>
    <div class="add-new-item flex-row">
      <span id="btn"></span>
      <input type="text" placeholder="creat a new todo" id="addItem">
    </div>
    <section class="content">
      <ul>
        <li class="flex-row">
          <label class="list-item">
            <input type="checkbox" name="todo-list" checked>
            <span class="checkmark"></span>
            <span class="text">tex 1</span>
          </label>
          <span class="remove"></span>
        </li>
        <li class="flex-row">
          <label class="list-item">
            <input type="checkbox" name="todo-list">
            <span class="checkmark"></span>
            <span class="text">tex 2</span>
          </label>
          <span class="remove"></span>
        </li>
        <li class="flex-row">
          <label class="list-item">
            <input type="checkbox" name="todo-list" checked>
            <span class="checkmark"></span>
            <span class="text">tex 2</span>
          </label>
          <span class="remove"></span>
        </li>
        <li class="flex-row">
          <label class="list-item">
            <input type="checkbox" name="todo-list" checked>
            <span class="checkmark"></span>
            <span class="text">tex 3</span>
          </label>
          <span class="remove"></span>
        </li>
        <li class="flex-row">
          <label class="list-item">
            <input type="checkbox" name="todo-list" checked>
            <span class="checkmark"></span>
            <span class="text">tex 4</span>
          </label>
          <span class="remove"></span>
        </li>
      </ul>
    </section>
    <div class="bottom-items flex-row">
      <div class="item-left"><span>5</span>items left</div>
      <div class="filter flex-row">
        <label>
          <input type="radio" name="filter" id="all" checked>
          <span>All</span>
        </label>
        <label>
          <input type="radio" name="filter" id="active" checked>
          <span>Active</span>
        </label>
        <label>
          <input type="radio" name="filter" id="completed" checked>
          <span>completed</span>
        </label>
      </div>
      <span class="clear"> clear compleated</span>
    </div>
  </main>
  
  
  <div class="attribution" style="position: absolute; bottom: 0;">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
    Coded by <a href="#">Mohamed Mostafa</a>.
  </div>
  <script>
    let theme = document.getElementById('theme');
let newItem = document.getElementById('addItem');
let todoList = document.querySelector(".content ul");
let body = document.getElementById('body');
let btn = document.getElementById('btn');
let itemsleft = document.querySelector('.item-left span');
let filterActive = document.querySelector(".filter #active"); 
let filterComplete = document.querySelector(".filter #completed");  
let removelem = document.querySelector(".remove");  
let li = document.createElement("li");
li.style.cursor = "grab"

theme.addEventListener("click", () => {
    body.classList = [theme.checked ? "theme-light" : "theme-black"];
});

btn.addEventListener("click", () => {
    if (newItem.value.length > 0) {
        let li = document.createElement("li");
        li.className = "flex-row";
        li.innerHTML = `
            <label class="list-item">
                <input type="checkbox" name="todo-list" checked>
                <span class="checkmark"></span>
                <span class="text">${newItem.value}</span>
            </label>
            <span class="remove"></span>`;

        todoList.appendChild(li);

        newItem.value = "";

        updateItemsCount(1);
    }
});

document.querySelector('.clear').addEventListener('click', () => {
    todoList.querySelectorAll('.list-item input[type="checkbox"]:checked').forEach(elem => removeItem(elem.closest('li')));
});

function filterItems(id) {
    const allItems = todoList.querySelectorAll('li');
    switch (id) {
        case 'all':
            allItems.forEach(item => {
                item.classList.remove('hidden');
            });
            break;
        case 'active':
            allItems.forEach(item => {
                item.querySelector('input').checked ? item.classList.add('hidden') : item.classList.remove('hidden');
            });
            break;
        case 'completed':
            allItems.forEach(item => {
                !item.querySelector('input').checked ? item.classList.add('hidden') : item.classList.remove('hidden');
            });
            break;
    }
}

todoList.querySelectorAll('li').forEach(item => {
    item.draggable = true;
    item.addEventListener('dragstart', handleDragStart);
    item.addEventListener('dragover', handleDragOver);
    item.addEventListener('drop', handleDrop);
    item.addEventListener('dragenter', handleDragEnter);
    item.addEventListener('dragleave', handleDragLeave);
});

function handleDragStart(event) {
    
    event.dataTransfer.setData("text/plain", event.target.id);
}

function handleDragOver(event) {
    
    event.preventDefault();
}

function handleDrop(event) {
    
    event.preventDefault();


    const draggedItemId = event.dataTransfer.getData("text/plain");

    
    const draggedItem = document.getElementById(draggedItemId);

    
    const dropTarget = event.target.closest('li');
    dropTarget.parentNode.insertBefore(draggedItem, dropTarget);

    
    draggedItem.classList.remove('dragging');
}

function handleDragEnter(event) {
    event.target.classList.add('drag-enter');
}

function handleDragLeave(event) {
    event.target.classList.remove('drag-enter');
}

function updateItemsCount(num) {
    itemsleft.innerText = Number(itemsleft.innerText) + num;
}

function removeItem(elem) {
    elem.remove();
    updateItemsCount(-1);
}

filterActive.addEventListener('click', () => {
    filterItems('active');
});

filterComplete.addEventListener('click', () => {
    filterItems('completed');
});

  </script>
</body>

</html>